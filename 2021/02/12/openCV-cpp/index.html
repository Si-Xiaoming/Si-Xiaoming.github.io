<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><title>opencv c++版本基础 | 枕小路的博客</title><meta name="keywords" content="c++,opencv"><meta name="author" content="Shuming Si"><meta name="copyright" content="Shuming Si"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="opencv c++版本基础知识整理，主要包括Mat矩阵、基本图像处理等">
<meta property="og:type" content="article">
<meta property="og:title" content="opencv c++版本基础">
<meta property="og:url" content="http://si-xiaoming.github.io/2021/02/12/openCV-cpp/index.html">
<meta property="og:site_name" content="枕小路的博客">
<meta property="og:description" content="opencv c++版本基础知识整理，主要包括Mat矩阵、基本图像处理等">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://w.wallhaven.cc/full/ne/wallhaven-nemp9k.jpg">
<meta property="article:published_time" content="2021-02-12T03:12:00.000Z">
<meta property="article:modified_time" content="2022-02-24T15:18:00.288Z">
<meta property="article:author" content="Shuming Si">
<meta property="article:tag" content="c++">
<meta property="article:tag" content="opencv">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://w.wallhaven.cc/full/ne/wallhaven-nemp9k.jpg"><link rel="shortcut icon" href="/img/head.png"><link rel="canonical" href="http://si-xiaoming.github.io/2021/02/12/openCV-cpp/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//hm.baidu.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.css" media="print" onload="this.media='all'"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?e44ef8fb37bb31e8f366764ba3f2efe4";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery@2/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'opencv c++版本基础',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-02-24 23:18:00'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><link rel="stylesheet" href="APlayer.min.css"><div id="aplayer"></div><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js" async></script><meta name="generator" content="Hexo 6.0.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/ssm.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data is-center"><div class="data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a></div><div class="data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a></div><div class="data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 类别</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-list"></i><span> 留言</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://w.wallhaven.cc/full/ne/wallhaven-nemp9k.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">枕小路的博客</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 类别</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div><div class="menus_item"><a class="site-page" href="/comment/"><i class="fa-fw fas fa-list"></i><span> 留言</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">opencv c++版本基础</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2021-02-12T03:12:00.000Z" title="发表于 2021-02-12 11:12:00">2021-02-12</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-02-24T15:18:00.288Z" title="更新于 2022-02-24 23:18:00">2022-02-24</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="opencv c++版本基础"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><p><a target="_blank" rel="noopener" href="https://docs.opencv.org/2.4/doc/tutorials/tutorials.html">OpenCV Tutorials — OpenCV 2.4.13.7 documentation</a></p>
<p><a target="_blank" rel="noopener" href="http://www.opencv.org.cn/opencvdoc/2.3.2/html/">Welcome to opencv documentation! — OpenCV 2.3.2 documentation</a></p>
<p><a target="_blank" rel="noopener" href="https://docs.opencv.org/3.4/examples.html">OpenCV: Examples</a></p>
<p><a target="_blank" rel="noopener" href="https://github.com/sileixinhua/OpenCV_C-_tutorials">https://github.com/sileixinhua/OpenCV_C-_tutorials</a></p>
<h2 id="include"><a href="#include" class="headerlink" title="include"></a>include</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/core.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/highgui.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/imgproc/types_c.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;string&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br></pre></td></tr></table></figure>
<h2 id="mat矩阵"><a href="#mat矩阵" class="headerlink" title="mat矩阵"></a>mat矩阵</h2><h3 id="创建mat矩阵"><a href="#创建mat矩阵" class="headerlink" title="创建mat矩阵"></a>创建mat矩阵</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">cv::Mat <span class="title">mats</span><span class="params">(<span class="number">500</span>, <span class="number">400</span>, CV_8U,<span class="number">100</span>)</span></span>;</span><br><span class="line">Matx&lt;<span class="keyword">double</span>, <span class="number">5</span>, <span class="number">3</span>&gt; matrix;</span><br><span class="line">matrix &lt;&lt; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>,</span><br><span class="line">        <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>,</span><br><span class="line">        <span class="number">11</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">14</span>, <span class="number">15</span>;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//以下为新建mat</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">creatMat</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="comment">//mat创建标准矩阵具有同一种类的构造</span></span><br><span class="line">	<span class="keyword">int</span> rows = <span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> cols = <span class="number">5</span>;</span><br><span class="line">	<span class="comment">//1.1 创建单位矩阵</span></span><br><span class="line">	Mat eyeMat = Mat::<span class="built_in">eye</span>(rows, cols, CV_8UC1);</span><br><span class="line">	<span class="comment">//1.2 创建全零矩阵</span></span><br><span class="line">	Size zeroSize = Size_&lt;<span class="keyword">int</span>&gt;(<span class="number">5</span>, <span class="number">5</span>);<span class="comment">//系统定义的size：typedef Size_&lt;int&gt;Size2i;     typedef Size2i Size;</span></span><br><span class="line">	Mat zeroMat = Mat::<span class="built_in">zeros</span>(zeroSize, CV_8UC1);</span><br><span class="line">	<span class="comment">//1.3 创建全1矩阵</span></span><br><span class="line">	Mat onesMat = Mat::<span class="built_in">ones</span>(rows, cols, CV_8UC1);</span><br><span class="line">	cout &lt;&lt; eyeMat &lt;&lt; <span class="string">&quot;\n----\n&quot;</span> &lt;&lt; zeroMat &lt;&lt; <span class="string">&quot;\n----\n&quot;</span> &lt;&lt; onesMat &lt;&lt; endl;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//利用构造函数创建矩阵</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createMat2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> rows = <span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> cols = <span class="number">5</span>;</span><br><span class="line">	<span class="comment">//1.1 </span></span><br><span class="line">	<span class="function">Mat <span class="title">mat1</span><span class="params">(rows, cols, CV_8UC1)</span></span>;</span><br><span class="line">	<span class="comment">//1.2</span></span><br><span class="line">	<span class="function">Mat <span class="title">mat2</span><span class="params">(cv::Size(rows, cols), CV_8UC1)</span></span>;</span><br><span class="line">	<span class="comment">//1.3</span></span><br><span class="line">	<span class="function">Mat <span class="title">mat3</span><span class="params">(rows, cols, CV_8UC3, Scalar(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>))</span></span>;</span><br><span class="line">	<span class="comment">//1.4</span></span><br><span class="line">	<span class="function">Mat <span class="title">mat4</span><span class="params">(std::vector&lt;<span class="keyword">int</span>&gt;(rows, cols), CV_8UC3)</span></span>;</span><br><span class="line">	<span class="comment">//COPY</span></span><br><span class="line">	<span class="function">Mat <span class="title">mat5</span><span class="params">(mat3)</span></span>;</span><br><span class="line">    <span class="comment">//1.6</span></span><br><span class="line">    <span class="function">Mat <span class="title">imageROI</span><span class="params">(mat5,Rect(<span class="number">10</span>,<span class="number">10</span>,<span class="number">500</span>,<span class="number">400</span>))</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//先定义后创建</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">define_create</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> rows = <span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> cols = <span class="number">5</span>;</span><br><span class="line">	Mat mat;</span><br><span class="line">	mat.<span class="built_in">create</span>(rows, cols, CV_8UC3);</span><br><span class="line">	Mat mat1;</span><br><span class="line">	mat1.<span class="built_in">create</span>(<span class="built_in">Size</span>(rows, cols), CV_8UC1);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>mat3输出结果：</p>
<p>[  2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1;<br>2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1;<br>2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1;<br>2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1;<br>2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1,   2,   3,   1]</p>
</blockquote>
<h3 id="矩阵mat赋值"><a href="#矩阵mat赋值" class="headerlink" title="矩阵mat赋值"></a>矩阵mat赋值</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//矩阵初始化</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">MatrixInit</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">int</span> rows = <span class="number">5</span>;</span><br><span class="line">	<span class="keyword">int</span> cols = <span class="number">5</span>;</span><br><span class="line">	<span class="comment">//3.1 创建并初始化矩阵</span></span><br><span class="line">	Mat mat8 = (Mat_&lt;uchar&gt;(rows, cols) &lt;&lt; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>);</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;采用Mat_类构造矩阵\n&quot;</span> &lt;&lt; mat8 &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//3.2 构造初始化</span></span><br><span class="line">	<span class="function">Mat <span class="title">mat9</span><span class="params">(rows, cols, CV_8UC3, Scalar(<span class="number">255</span>))</span></span>;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;构造初始化\n&quot;</span> &lt;&lt; mat9 &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//3.3 采用at初始化单通道</span></span><br><span class="line">	<span class="function">Mat <span class="title">mat1</span><span class="params">(rows, cols, CV_8UC1)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mat1.rows; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; mat1.cols; j++) &#123;</span><br><span class="line">			mat1.at&lt;uchar&gt;(i, j) = <span class="number">12</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	cout &lt;&lt; <span class="string">&quot;单通道矩阵\n&quot;</span> &lt;&lt; mat1 &lt;&lt; endl;</span><br><span class="line">	<span class="comment">//3.4 采用at初始化多通道</span></span><br><span class="line">	<span class="function">Mat <span class="title">mat6</span><span class="params">(rows, cols, CV_8UC3)</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mat6.rows; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; mat6.cols; j++) &#123;</span><br><span class="line">			mat6.at&lt;cv::Vec3b&gt;(i, j) = cv::<span class="built_in">Vec3b</span>(<span class="number">1</span>, <span class="number">3</span>, <span class="number">2</span>);           <span class="comment">//Vec&lt;uchar, 3&gt;</span></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">	<span class="comment">//3.5 采用行指针ptr初始化单通道</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mat1.rows; i++) &#123;</span><br><span class="line">		uchar *ptr = mat1.ptr&lt;uchar&gt;(i);  </span><br><span class="line">		<span class="comment">//Vec3b *ptr = mat1.ptr&lt;Vec3b&gt;(i);  多通道</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; mat1.cols; j++) &#123;</span><br><span class="line">			ptr[j] = <span class="number">132</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="拷贝"><a href="#拷贝" class="headerlink" title="拷贝"></a>拷贝</h3><p><strong>1.浅拷贝</strong><br><code>B = A</code><br><code>B(A)</code><br>这类拷贝方法仅创建了新的矩阵头，共用同一个内存空间，在修改新对象的时候，旧对象也会改变。</p>
<p><strong>2.深拷贝</strong><br><code>B = A.clone()</code><br><code>A.copyTo(B)</code><br>这类拷贝方法为新的矩阵申请了新的内存空间，在修改新对象的时候，旧对象不会改变。</p>
<h4 id="在此辨析setTo与copyTo"><a href="#在此辨析setTo与copyTo" class="headerlink" title="在此辨析setTo与copyTo"></a>在此辨析setTo与copyTo</h4><p><strong>利用setTo()赋值</strong></p>
<p>切记：setTo只能给矩阵赋一个标量值，即第一个参数必须是数值，不能是图像</p>
<p>用法：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">新图像.setTo(数值,mask);</span><br></pre></td></tr></table></figure>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Mat mat1;</span><br><span class="line">mat1.<span class="built_in">create</span>(rows,cols,CV_8UC1);</span><br><span class="line">mat1.<span class="built_in">setTo</span>(<span class="number">5</span>);    <span class="comment">//全部赋值为5</span></span><br></pre></td></tr></table></figure>
<p>setTo可以利用mask蒙版</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Mat mmat;</span><br><span class="line">mmat.<span class="built_in">create</span>(rows,cols,CV_8UC1);</span><br><span class="line">mmat.<span class="built_in">setTo</span>(<span class="number">0</span>, mmat &lt; <span class="number">85</span>);   <span class="comment">//mmat&lt;85   生成蒙版，小于85的为0，大于等于85的是255</span></span><br></pre></td></tr></table></figure>
<p>第二个参数相当于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Mat mask = (mmat&lt;85)</span><br></pre></td></tr></table></figure>
<p><strong>copyTo</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">旧图像.copyTo(新图像,mask);</span><br></pre></td></tr></table></figure>
<h3 id="Mat属性"><a href="#Mat属性" class="headerlink" title="Mat属性"></a>Mat属性</h3><ul>
<li><strong>data</strong> uchar型的指针。Mat类分为了两个部分:矩阵头和指向矩阵数据部分的指针，data就是指向矩阵数据的指针。</li>
<li><strong>dims</strong> 矩阵的维度，例如5*6矩阵是二维矩阵，则dims=2，三维矩阵dims=3.</li>
<li><strong>rows</strong> 矩阵的行数</li>
<li><strong>cols</strong>  矩阵的列数</li>
<li><strong>size</strong> 矩阵的大小，size(cols,rows),如果矩阵的维数大于2，则是size(-1,-1)</li>
<li><strong>channels</strong> 矩阵元素拥有的通道数，例如常见的彩色图像，每一个像素由RGB三部分组成，则channels = 3</li>
</ul>
<p>下面的几个属性是和Mat中元素的数据类型相关的。</p>
<ul>
<li><p>type</p>
<p>表示了矩阵中元素的类型以及矩阵的通道个数，它是一系列的预定义的常量，其命名规则为CV_(位数）+（数据类型）+（通道数）。具体的有以下值：</p>
<p>| CV_8UC1  | CV_8UC2  | CV_8UC3  | CV_8UC4  |<br>| ———— | ———— | ———— | ———— |<br>| CV_8SC1  | CV_8SC2  | CV_8SC3  | CV_8SC4  |<br>| CV_16UC1 | CV_16UC2 | CV_16UC3 | CV_16UC4 |<br>| CV_16SC1 | CV_16SC2 | CV_16SC3 | CV_16SC4 |<br>| CV_32SC1 | CV_32SC2 | CV_32SC3 | CV_32SC4 |<br>| CV_32FC1 | CV_32FC2 | CV_32FC3 | CV_32FC4 |<br>| CV_64FC1 | CV_64FC2 | CV_64FC3 | CV_64FC4 |</p>
<p>这里U（unsigned integer）表示的是无符号整数，S（signed integer）是有符号整数，F（float）是浮点数。</p>
<p>例如：CV_16UC2，表示的是元素类型是一个16位的无符号整数，通道为2.</p>
<p>C1，C2，C3，C4则表示通道是1,2,3,4</p>
<p>type一般是在创建Mat对象时设定，如果要取得Mat的元素类型，则无需使用type，使用下面的depth</p>
</li>
<li><p><strong>depth</strong><br>矩阵中元素的一个通道的数据类型，这个值和type是相关的。例如 type为 CV_16SC2，一个2通道的16位的有符号整数。那么，depth则是CV_16S。depth也是一系列的预定义值，<br>将type的预定义值去掉通道信息就是depth值:<br>CV_8U CV_8S CV_16U CV_16S CV_32S CV_32F CV_64F</p>
</li>
</ul>
<h2 id="图像基本计算"><a href="#图像基本计算" class="headerlink" title="图像基本计算"></a>图像基本计算</h2><h3 id="利用函数进行加减乘除等"><a href="#利用函数进行加减乘除等" class="headerlink" title="利用函数进行加减乘除等"></a>利用函数进行加减乘除等</h3><p>对于<code>add</code> 函数，只能两个大小、通道数相同的两个矩阵相加</p>
<p>可以添加mask矩阵，mask矩阵中，数值为0的地方，最终输出矩阵的对应元素值为0；数值不为0的地方，最终输出矩阵的对应元素值为两个矩阵对应元素的相加值。</p>
<p>例如下例中，</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Add</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src1, src2, dst;</span><br><span class="line">	<span class="keyword">int</span> rows = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> cols = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">	src1.<span class="built_in">create</span>(rows, cols, CV_8UC1);</span><br><span class="line">	src1.<span class="built_in">setTo</span>(<span class="number">20</span>);</span><br><span class="line">	src2.<span class="built_in">create</span>(rows, cols, CV_8UC1);</span><br><span class="line">	src2.<span class="built_in">setTo</span>(<span class="number">100</span>);</span><br><span class="line">	<span class="function">Mat <span class="title">mask</span><span class="params">(rows, cols, CV_8UC1, Scalar(<span class="number">0</span>))</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mask.rows/<span class="number">2</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; mask.cols/<span class="number">2</span>; j++) &#123;</span><br><span class="line">			mask.at&lt;uchar&gt;(i, j) = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">add</span>(src1, src2, dst, mask);</span><br><span class="line">	cout &lt;&lt; dst &lt;&lt; endl;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>其他的还有：</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">add</span><span class="params">(InputArray src1, InputArray src2, OutputArray dst,InputArray mask=noArray(), <span class="keyword">int</span> dtype=<span class="number">-1</span>)</span></span>;<span class="comment">//dst = src1 + src2</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">subtract</span><span class="params">(InputArray src1, InputArray src2, OutputArray dst,InputArray mask=noArray(), <span class="keyword">int</span> dtype=<span class="number">-1</span>)</span></span>;<span class="comment">//dst = src1 - src2</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">multiply</span><span class="params">(InputArray src1, InputArray src2,OutputArray dst, <span class="keyword">double</span> scale=<span class="number">1</span>, <span class="keyword">int</span> dtype=<span class="number">-1</span>)</span></span>;<span class="comment">//dst = scale*src1*src2</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">divide</span><span class="params">(InputArray src1, InputArray src2, OutputArray dst,<span class="keyword">double</span> scale=<span class="number">1</span>, <span class="keyword">int</span> dtype=<span class="number">-1</span>)</span></span>;<span class="comment">//dst = scale*src1/src2</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">divide</span><span class="params">(<span class="keyword">double</span> scale, InputArray src2,OutputArray dst, <span class="keyword">int</span> dtype=<span class="number">-1</span>)</span></span>;<span class="comment">//dst = scale/src2</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">scaleAdd</span><span class="params">(InputArray src1, <span class="keyword">double</span> alpha, InputArray src2, OutputArray dst)</span></span>;<span class="comment">//dst = alpha*src1 + src2</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">addWeighted</span><span class="params">(InputArray src1, <span class="keyword">double</span> alpha, InputArray src2,<span class="keyword">double</span> beta, <span class="keyword">double</span> gamma, OutputArray dst, <span class="keyword">int</span> dtype=<span class="number">-1</span>)</span></span>;<span class="comment">//dst = alpha*src1 + beta*src2 + gamma</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">sqrt</span><span class="params">(InputArray src, OutputArray dst)</span></span>;<span class="comment">//计算每个矩阵元素的平方根</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">pow</span><span class="params">(InputArray src, <span class="keyword">double</span> power, OutputArray dst)</span></span>;<span class="comment">//src的power次幂</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">exp</span><span class="params">(InputArray src, OutputArray dst)</span></span>;<span class="comment">//dst = e**src（**表示指数的意思）</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">log</span><span class="params">(InputArray src, OutputArray dst)</span></span>;<span class="comment">//dst = log(abs(src))</span></span><br></pre></td></tr></table></figure>
<h3 id="重载运算符"><a href="#重载运算符" class="headerlink" title="重载运算符"></a>重载运算符</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">learn_operator</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src1, src2, dst,multiply,add,subtract,divide, divide2, multiply2, add2, subtract2;</span><br><span class="line">	<span class="keyword">int</span> rows = <span class="number">10</span>;</span><br><span class="line">	<span class="keyword">int</span> cols = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">	src1.<span class="built_in">create</span>(rows, cols, CV_8UC1);</span><br><span class="line">	src1.<span class="built_in">setTo</span>(<span class="number">2</span>);</span><br><span class="line">	src2.<span class="built_in">create</span>(rows, cols, CV_8UC1);</span><br><span class="line">	src2.<span class="built_in">setTo</span>(<span class="number">100</span>);</span><br><span class="line">	<span class="function">Mat <span class="title">mask</span><span class="params">(rows, cols, CV_8UC1, Scalar(<span class="number">0</span>))</span></span>;</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; mask.rows / <span class="number">2</span>; i++) &#123;</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; mask.cols / <span class="number">2</span>; j++) &#123;</span><br><span class="line">			mask.at&lt;uchar&gt;(i, j) = <span class="number">1</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	divide = src2 / src1;</span><br><span class="line">	divide2 = src2 / <span class="number">10</span>;</span><br><span class="line">	multiply = src1 * <span class="number">5</span>;</span><br><span class="line">	add = src1 + src2;</span><br><span class="line">	add2 = src1 + <span class="number">37</span>;</span><br><span class="line">	subtract = src2 - src1;</span><br><span class="line">	subtract2 = src2 - <span class="number">43</span>;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我们可以看出在opencv中可以运用+-/*，得出一个矩阵。</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Mat <span class="title">rand_mat</span><span class="params">(rows, cols, CV_8UC1)</span></span>;</span><br><span class="line"><span class="built_in">randn</span>(rand_mat, <span class="number">100</span>, <span class="number">10</span>);</span><br><span class="line">cout &lt;&lt; rand_mat &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; <span class="string">&quot;--------result------------&quot;</span> &lt;&lt; endl;</span><br><span class="line">cout &lt;&lt; (rand_mat &lt; <span class="number">100</span>) &lt;&lt; endl;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>[100, 102,  93,  96, 112;<br>  97,  94, 103, 105,  89;<br> 108, 100, 113,  80,  81;<br>  95,  93, 119, 103,  86;<br> 115,  92,  75,  85,  86]<br>————result——————<br>[  0,   0, 255, 255,   0;<br> 255, 255,   0,   0, 255;<br>   0,   0,   0, 255, 255;<br> 255, 255,   0,   0, 255;<br>   0, 255, 255, 255, 255]</p>
</blockquote>
<p>由此可以看出<code>(rand_mat &lt; 100)</code>的作用可以生成蒙版，这一启示可以帮助我们在<code>setTo</code>等函数中构建mask</p>
<h2 id="在图像上绘制"><a href="#在图像上绘制" class="headerlink" title="在图像上绘制"></a>在图像上绘制</h2><p><strong>绘制矩形</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DrawRect</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::Mat mat = cv::<span class="built_in">imread</span>(filename);</span><br><span class="line">	<span class="keyword">if</span> (mat.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cv::Point p0 = cv::<span class="built_in">Point</span>(mat.cols / <span class="number">8</span>, mat.rows / <span class="number">8</span>);</span><br><span class="line">	cv::Point p1 = cv::<span class="built_in">Point</span>(mat.cols * <span class="number">7</span> / <span class="number">8</span>, mat.rows * <span class="number">7</span> / <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">rectangle</span>(mat, p0, p1, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">5</span>, <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">	cv::Point p2 = cv::<span class="built_in">Point</span>(mat.cols * <span class="number">2</span> / <span class="number">8</span>, mat.rows * <span class="number">2</span> / <span class="number">8</span>);</span><br><span class="line">	cv::Point p3 = cv::<span class="built_in">Point</span>(mat.cols * <span class="number">6</span> / <span class="number">8</span>, mat.rows * <span class="number">6</span> / <span class="number">8</span>);</span><br><span class="line"></span><br><span class="line">	<span class="built_in">rectangle</span>(mat, p2, p3, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>), <span class="number">2</span>, <span class="number">4</span>);</span><br><span class="line">    <span class="comment">//或者</span></span><br><span class="line">    <span class="comment">//rectangle(base, cv::Rect(50, 50, 100, 150), cv::Scalar(&#123; 255,255,255 &#125;), 2,4);</span></span><br><span class="line">	<span class="comment">//#第二个参数是矩形的位置和大小，第三个是颜色值，第四个是线条宽度，第五个是线性</span></span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;mat&quot;</span>, mat);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>绘制圆</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Circles</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">cv::Mat <span class="title">img0</span><span class="params">(<span class="number">400</span>, <span class="number">400</span>, CV_8UC3, cv::Scalar(<span class="number">150</span>, <span class="number">150</span>, <span class="number">150</span>))</span></span>;</span><br><span class="line">	<span class="built_in">circle</span>(img0, cv::<span class="built_in">Point</span>(<span class="number">200</span>, <span class="number">200</span>), <span class="number">50</span>, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>));  <span class="comment">///颜色是B G R</span></span><br><span class="line">    <span class="comment">///  第五个参数thickness默认 = 1</span></span><br><span class="line">	cv::<span class="built_in">imwrite</span>(<span class="string">&quot;CirclesImg0.jpg&quot;</span>, img0);</span><br><span class="line"></span><br><span class="line">	<span class="function">cv::Mat <span class="title">img1</span><span class="params">(<span class="number">400</span>, <span class="number">400</span>, CV_8UC3, cv::Scalar(<span class="number">150</span>, <span class="number">150</span>, <span class="number">150</span>))</span></span>;</span><br><span class="line">	<span class="built_in">circle</span>(img1, cv::<span class="built_in">Point</span>(<span class="number">200</span>, <span class="number">200</span>), <span class="number">100</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">3</span>);</span><br><span class="line">	cv::<span class="built_in">imwrite</span>(<span class="string">&quot;CirclesImg1.jpg&quot;</span>, img1);</span><br><span class="line"></span><br><span class="line">	<span class="function">cv::Mat <span class="title">img2</span><span class="params">(<span class="number">400</span>, <span class="number">400</span>, CV_8UC3, cv::Scalar(<span class="number">150</span>, <span class="number">150</span>, <span class="number">150</span>))</span></span>;</span><br><span class="line">	<span class="built_in">circle</span>(img2, cv::<span class="built_in">Point</span>(<span class="number">200</span>, <span class="number">200</span>), <span class="number">150</span>, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">-1</span>);</span><br><span class="line">    <span class="comment">/// 第五个参数&lt;0，代表内部全部填充</span></span><br><span class="line">	cv::<span class="built_in">imwrite</span>(<span class="string">&quot;CirclesImg2.jpg&quot;</span>, img2);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>绘制直线</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Lines</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::Mat mat = cv::<span class="built_in">imread</span>(filename);</span><br><span class="line">	<span class="keyword">if</span> (mat.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> x0 = mat.cols / <span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> x1 = mat.cols * <span class="number">3</span> / <span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> y0 = mat.rows / <span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> y1 = mat.rows * <span class="number">3</span> / <span class="number">4</span>;</span><br><span class="line"></span><br><span class="line">	cv::Point p0 = cv::<span class="built_in">Point</span>(x0, y0);</span><br><span class="line">	cv::Point p1 = cv::<span class="built_in">Point</span>(x1, y1);</span><br><span class="line">	cv::<span class="built_in">line</span>(mat, p0, p1, cv::<span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>), <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">	p0.y = y1;</span><br><span class="line">	p1.y = y0;</span><br><span class="line">	cv::<span class="built_in">line</span>(mat, p0, p1, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">0</span>, <span class="number">0</span>), <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;mat&quot;</span>, mat);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>添加文字</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DrawText</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::Mat mat = cv::<span class="built_in">imread</span>(filename);</span><br><span class="line">	<span class="keyword">if</span> (mat.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	cv::Point p = cv::<span class="built_in">Point</span>(<span class="number">50</span>, mat.rows / <span class="number">2</span> - <span class="number">50</span>);</span><br><span class="line">	cv::<span class="built_in">putText</span>(mat, <span class="string">&quot;Hello OpenCV&quot;</span>, p, cv::FONT_HERSHEY_TRIPLEX, <span class="number">1.5</span>, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">200</span>, <span class="number">200</span>), <span class="number">2</span>);</span><br><span class="line">    <span class="comment">//1.5是缩放比例  p是文字放置点   2是bool值，是否左对齐</span></span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;mat&quot;</span>, mat);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="简单图像处理"><a href="#简单图像处理" class="headerlink" title="简单图像处理"></a>简单图像处理</h2><h3 id="矩阵遍历"><a href="#矩阵遍历" class="headerlink" title="矩阵遍历"></a>矩阵遍历</h3><p><strong>取出R G B 各个通道</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vector&lt;Mat&gt; channel_mats;</span><br><span class="line"><span class="built_in">split</span>(mmat, channel_mats);</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;mat&quot;</span>, channel_mats[<span class="number">0</span>]);  <span class="comment">//B通道</span></span><br></pre></td></tr></table></figure>
<h3 id="快速翻转"><a href="#快速翻转" class="headerlink" title="快速翻转"></a>快速翻转</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Flip</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::Mat src = cv::<span class="built_in">imread</span>(filename, IMREAD_GRAYSCALE);</span><br><span class="line">	<span class="keyword">int</span> flipCode = <span class="number">-1</span>; <span class="comment">// &gt;0: 沿y-轴翻转, 0: 沿x-轴翻转, &lt;0: x、y轴同时翻转</span></span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	cv::Mat dst;</span><br><span class="line">	cv::<span class="built_in">flip</span>(src, dst, flipCode);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="resize"><a href="#resize" class="headerlink" title="resize"></a>resize</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Resize</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	<span class="keyword">float</span> scaleW = <span class="number">0.8</span>;</span><br><span class="line">	<span class="keyword">float</span> scaleH = scaleW;</span><br><span class="line"></span><br><span class="line">	src = cv::<span class="built_in">imread</span>(filename);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> width = <span class="keyword">static_cast</span>&lt;<span class="keyword">float</span>&gt;(src.cols*scaleW);   <span class="comment">//强制转换   float转int</span></span><br><span class="line">	<span class="keyword">int</span> height = <span class="keyword">static_cast</span>&lt;<span class="keyword">float</span>&gt;(src.rows*scaleH);</span><br><span class="line">	<span class="built_in">resize</span>(src, dst, cv::<span class="built_in">Size</span>(width, height));</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="仿射变换"><a href="#仿射变换" class="headerlink" title="仿射变换"></a>仿射变换</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Rotate</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">float</span> angle = <span class="number">90</span>;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	src = cv::<span class="built_in">imread</span>(filename);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cv::Point2f center = cv::<span class="built_in">Point2f</span>(<span class="keyword">static_cast</span>&lt;<span class="keyword">float</span>&gt;(src.cols / <span class="number">2</span>),</span><br><span class="line">		<span class="keyword">static_cast</span>&lt;<span class="keyword">float</span>&gt;(src.rows / <span class="number">2</span>));    <span class="comment">// 设置旋转中心</span></span><br><span class="line">	cv::Mat affineTrans = <span class="built_in">getRotationMatrix2D</span>(center, angle, <span class="number">0.5</span>);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">warpAffine</span>(src, dst, affineTrans, src.<span class="built_in">size</span>(), cv::INTER_CUBIC, cv::BORDER_REPLICATE);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<div class="table-container">
<table>
<thead>
<tr>
<th>INTER_NEAREST</th>
<th style="text-align:center">最临近插值算法</th>
</tr>
</thead>
<tbody>
<tr>
<td>INTER_LINEAR</td>
<td style="text-align:center">线性插值算法</td>
</tr>
<tr>
<td>INTER_CUBIC</td>
<td style="text-align:center">双立方插值算法</td>
</tr>
<tr>
<td>INTER_AREA</td>
<td style="text-align:center">区域插值算法（使用像素区域关系的重采样，时图像抽取的首选方法，但是当图像被放大，它类似于INTER_NEAREST方法）</td>
</tr>
<tr>
<td>INTER_LANCZOS4</td>
<td style="text-align:center">Lanczos插值(超过8x8邻域的插值算法)</td>
</tr>
<tr>
<td>INTER_MAX</td>
<td style="text-align:center">用于插值的掩模板</td>
</tr>
<tr>
<td>WARP_FILL_OUTLIERS</td>
<td style="text-align:center">标志位，用于填充目标图像的像素值，如果其中的一些值对应于原图像中的异常值，那么这些值将被设置为0</td>
</tr>
<tr>
<td>WARP_INVERSE_MAP</td>
<td style="text-align:center">标志位，反变换</td>
</tr>
</tbody>
</table>
</div>
<p> borderMode: 边界像素模式，有默认值BORDER_CONSTANT<br>. borderValue: 边界取值，有默认值Scalar()即0</p>
<p><strong>这段代码效果：图片缓缓旋转一周</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">RotateCotinue</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">	cv::Point2f center = cv::<span class="built_in">Point2f</span>(<span class="keyword">static_cast</span>&lt;<span class="keyword">float</span>&gt;(src.cols / <span class="number">2</span>),</span><br><span class="line">		<span class="keyword">static_cast</span>&lt;<span class="keyword">float</span>&gt;(src.rows / <span class="number">2</span>));</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">namedWindow</span>(<span class="string">&quot;dst&quot;</span>, cv::WINDOW_AUTOSIZE);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">float</span> angle = <span class="number">0.0</span>; angle &lt; <span class="number">360.0</span>; angle++) &#123;</span><br><span class="line">		cv::Mat affineTrans = <span class="built_in">getRotationMatrix2D</span>(center, angle, <span class="number">1.0</span>);</span><br><span class="line">		cv::<span class="built_in">warpAffine</span>(src, dst, affineTrans, src.<span class="built_in">size</span>(), cv::INTER_CUBIC);</span><br><span class="line">		cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">		<span class="keyword">if</span> (cv::<span class="built_in">waitKey</span>(<span class="number">1</span>) &gt;= <span class="number">0</span>)</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="视角设置"><a href="#视角设置" class="headerlink" title="视角设置"></a>视角设置</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Perspective</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	cv::Point2f dstPoint[<span class="number">4</span>];</span><br><span class="line">	<span class="keyword">int</span> xMergin, yMergin;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> pattern = <span class="number">2</span>;<span class="comment">//0,1,2</span></span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> x0 = src.cols / <span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> x1 = (src.cols / <span class="number">4</span>) / <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">int</span> y0 = src.rows / <span class="number">4</span>;</span><br><span class="line">	<span class="keyword">int</span> y1 = (src.rows / <span class="number">4</span>) / <span class="number">3</span>;</span><br><span class="line">	cv::Point2f srcPoint[<span class="number">4</span>] = &#123;</span><br><span class="line">		cv::<span class="built_in">Point</span>(x0,y0),</span><br><span class="line">		cv::<span class="built_in">Point</span>(x0,y1),</span><br><span class="line">		cv::<span class="built_in">Point</span>(x1,y1),</span><br><span class="line">		cv::<span class="built_in">Point</span>(x1,y0),</span><br><span class="line">	&#125;;</span><br><span class="line"></span><br><span class="line">	<span class="built_in"><span class="keyword">switch</span></span> (pattern) &#123;</span><br><span class="line">	<span class="keyword">case</span> <span class="number">0</span>:</span><br><span class="line">		xMergin = src.cols / <span class="number">10</span>;</span><br><span class="line">		yMergin = src.rows / <span class="number">10</span>;</span><br><span class="line">		dstPoint[<span class="number">0</span>] = cv::<span class="built_in">Point</span>(x0 + xMergin, y0 + yMergin);</span><br><span class="line">		dstPoint[<span class="number">1</span>] = srcPoint[<span class="number">1</span>];</span><br><span class="line">		dstPoint[<span class="number">2</span>] = srcPoint[<span class="number">2</span>];</span><br><span class="line">		dstPoint[<span class="number">3</span>] = cv::<span class="built_in">Point</span>(x1 - xMergin, y0 + yMergin);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">		xMergin = src.cols / <span class="number">8</span>;</span><br><span class="line">		yMergin = src.rows / <span class="number">8</span>;</span><br><span class="line">		dstPoint[<span class="number">0</span>] = srcPoint[<span class="number">0</span>];</span><br><span class="line">		dstPoint[<span class="number">1</span>] = srcPoint[<span class="number">1</span>];</span><br><span class="line">		dstPoint[<span class="number">2</span>] = cv::<span class="built_in">Point</span>(x1 - xMergin, y1 - yMergin);</span><br><span class="line">		dstPoint[<span class="number">3</span>] = cv::<span class="built_in">Point</span>(x1 - xMergin, y0 + yMergin);</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">		xMergin = src.cols / <span class="number">6</span>;</span><br><span class="line">		yMergin = src.rows / <span class="number">6</span>;</span><br><span class="line">		dstPoint[<span class="number">0</span>] = cv::<span class="built_in">Point</span>(x0 + xMergin, y0 + yMergin);</span><br><span class="line">		dstPoint[<span class="number">1</span>] = srcPoint[<span class="number">1</span>];</span><br><span class="line">		dstPoint[<span class="number">2</span>] = cv::<span class="built_in">Point</span>(x1 - xMergin, y1 - yMergin);</span><br><span class="line">		dstPoint[<span class="number">3</span>] = srcPoint[<span class="number">3</span>];</span><br><span class="line">		<span class="keyword">break</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cv::Mat perspectiveMmat = cv::<span class="built_in">getPerspectiveTransform</span>(srcPoint, dstPoint);</span><br><span class="line">	cv::<span class="built_in">warpPerspective</span>(src, dst, perspectiveMmat, src.<span class="built_in">size</span>(), cv::INTER_CUBIC);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="颜色通道变化"><a href="#颜色通道变化" class="headerlink" title="颜色通道变化"></a>颜色通道变化</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cv::<span class="built_in">cvtColor</span>(src, dst, cv::COLOR_RGB2GRAY);   <span class="comment">//RGB三通道图片转为灰度图</span></span><br><span class="line"><span class="built_in">cvtColor</span>(image,imagehsi, CV_BGR2HSV); </span><br></pre></td></tr></table></figure>
<h3 id="均衡化"><a href="#均衡化" class="headerlink" title="均衡化"></a>均衡化</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line"><span class="built_in">cvtColor</span>(src, src, COLOR_RGB2GRAY);  <span class="comment">//切记均衡化务必是单通道</span></span><br><span class="line"><span class="built_in">equalizeHist</span>(src, dst);</span><br></pre></td></tr></table></figure>
<h3 id="图像二值化"><a href="#图像二值化" class="headerlink" title="图像二值化"></a>图像二值化</h3><p>threshold</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Threshold</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    cv::Mat src, dst;</span><br><span class="line">    <span class="keyword">double</span> thresh = <span class="number">60.0</span>, maxval = <span class="number">180.0</span>;</span><br><span class="line">    <span class="keyword">int</span> type = cv::THRESH_BINARY;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">    <span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        <span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">equalizeHist</span>(src,dst);</span><br><span class="line">    thresh = <span class="number">80.0</span>;</span><br><span class="line">    maxval = <span class="number">210.0</span>;</span><br><span class="line">    <span class="keyword">int</span> number = <span class="number">0</span>;<span class="comment">//0,1,2,3,4</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in"><span class="keyword">switch</span></span> (number) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">0</span>:type = cv::THRESH_BINARY; <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">1</span>:type = cv::THRESH_BINARY_INV; <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span>:type = cv::THRESH_TRUNC; <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">3</span>:type = cv::THRESH_TOZERO; <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="number">4</span>:type = cv::THRESH_TOZERO_INV; <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">threshold</span>(src,dst,thresh,maxval,type);</span><br><span class="line">    <span class="comment">//图像阈值化处理</span></span><br><span class="line">    <span class="comment">//第一个参数为原图像</span></span><br><span class="line">    <span class="comment">//第二个参数为处理后的输出图像</span></span><br><span class="line">    <span class="comment">//第三个参数为阈值</span></span><br><span class="line">    <span class="comment">//第四个参数maxval是当灰度值大于（或小于）阈值时将该灰度值赋成的值</span></span><br><span class="line">    <span class="comment">//第五个参数为阈值化的状态</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="图像滤波"><a href="#图像滤波" class="headerlink" title="图像滤波"></a>图像滤波</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/poem_qianmo/article/details/22745559">【OpenCV入门教程之八】线性邻域滤波专场：方框滤波、均值滤波与高斯滤波_【浅墨的游戏编程Blog】毛星云（浅墨）的专栏-CSDN博客_均值滤波与方框滤波</a></p>
<ul>
<li>方框滤波——boxblur函数</li>
<li>均值滤波（邻域平均滤波）——blur函数</li>
<li>高斯滤波——GaussianBlur函数</li>
<li>中值滤波——medianBlur函数</li>
<li>双边滤波——bilateralFilter函数</li>
</ul>
<h3 id="均值滤波"><a href="#均值滤波" class="headerlink" title="均值滤波"></a>均值滤波</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Blur</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//主要代码</span></span><br><span class="line">	<span class="keyword">int</span> ksize = <span class="number">3</span>;</span><br><span class="line">	<span class="built_in">blur</span>(src, dst, cv::<span class="built_in">Size</span>(ksize, ksize));</span><br><span class="line">    <span class="comment">///  Size是卷积核大小，越大越模糊</span></span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="高斯滤波"><a href="#高斯滤波" class="headerlink" title="高斯滤波"></a>高斯滤波</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">GaussianBlur</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> ksize1 = <span class="number">11</span>;</span><br><span class="line">	<span class="keyword">int</span> ksize2 = <span class="number">11</span>;</span><br><span class="line">	<span class="keyword">double</span> sigma1 = <span class="number">10.0</span>;  <span class="comment">//表示高斯核函数在X方向的的标准偏差</span></span><br><span class="line">	<span class="keyword">double</span> sigma2 = <span class="number">20.0</span>;  <span class="comment">//表示高斯核函数在Y方向的的标准偏差。若sigmaY为零，就将它设为sigmaX，如果sigmaX和sigmaY都是0，那么就由ksize.width和ksize.height计算出来。</span></span><br><span class="line">	cv::<span class="built_in">GaussianBlur</span>(src, dst, cv::<span class="built_in">Size</span>(ksize1, ksize2), sigma1, sigma2);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">	cv::<span class="built_in">waitKey</span>();</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="卷积算子"><a href="#卷积算子" class="headerlink" title="卷积算子"></a>卷积算子</h2><p>以下laplacian、sobel、canny算子常用于边缘检测</p>
<p><strong>Laplacian</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Laplacian</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">Laplacian</span>(src, dst, <span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>sobel算子</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Sobel</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">Sobel</span>(src, dst, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;sobel&quot;</span>, dst);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>canny算子</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Canny</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, dst;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\test.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">double</span> threshold1 = <span class="number">40.0</span>;</span><br><span class="line">	<span class="keyword">double</span> threshold2 = <span class="number">200.0</span>;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">Canny</span>(src, dst, threshold1, threshold2);</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;canny&quot;</span>, dst);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="特征提取"><a href="#特征提取" class="headerlink" title="特征提取"></a>特征提取</h2><h3 id="角点检测"><a href="#角点检测" class="headerlink" title="角点检测"></a>角点检测</h3><p><strong>goodFeaturesToTrack函数</strong></p>
<p>可以计算Harris角点和shi-tomasi角点，但默认情况下计算的是shi-tomasi角点</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DetectConers</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	cv::Mat src, gray, dst;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">int</span> maxCorners = <span class="number">50</span>, blockSize = <span class="number">3</span>;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">double</span> qualityLevel = <span class="number">0.01</span>, minDistance = <span class="number">20.0</span>, k = <span class="number">0.04</span>;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">bool</span> useHarrisDetector = <span class="literal">false</span>;</span><br><span class="line">	std::vector&lt; cv::Point2f &gt; corners;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\demo.jpg&quot;</span>;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imread</span>(filename).<span class="built_in">copyTo</span>(src);</span><br><span class="line">	<span class="keyword">if</span> (src.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		<span class="keyword">throw</span>(<span class="string">&quot;Faild open file.&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	dst = src.<span class="built_in">clone</span>();</span><br><span class="line">	<span class="comment">//角点检测必须用灰度图</span></span><br><span class="line">	<span class="built_in">cvtColor</span>(src, gray, cv::COLOR_RGB2GRAY);</span><br><span class="line">	<span class="comment">//这个函数用于角点检测</span></span><br><span class="line">	<span class="comment">//maxCorners角点数目最大值，如果实际检测的角点超过此值，则只返回前maxCorners个强角点</span></span><br><span class="line">	<span class="comment">//qualityLevel：角点的品质因子</span></span><br><span class="line">	<span class="comment">//minDistance：对于初选出的角点而言，如果在其周围minDistance范围内存在其他更强角点，则将此角点删除</span></span><br><span class="line">	<span class="comment">//cv::Mat()：这里是mask，用于提取ROI，这里不需要mask，就用Mat()这样的方式占位</span></span><br><span class="line">	<span class="comment">//blockSize：计算协方差矩阵时的窗口大小</span></span><br><span class="line">	<span class="comment">//useHarrisDetector：指示是否使用Harris角点检测，如不指定，则计算shi-tomasi角点</span></span><br><span class="line">	<span class="comment">//harrisK：Harris角点检测需要的k值</span></span><br><span class="line">	</span><br><span class="line">	<span class="built_in">goodFeaturesToTrack</span>(gray, corners, maxCorners, qualityLevel,</span><br><span class="line">		minDistance, cv::<span class="built_in">Mat</span>(), blockSize, useHarrisDetector, k);</span><br><span class="line">	<span class="comment">//绘制角点</span></span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">size_t</span> i = <span class="number">0</span>; i &lt; corners.<span class="built_in">size</span>(); i++) &#123;</span><br><span class="line">		<span class="built_in">circle</span>(dst, corners[i], <span class="number">8</span>, cv::<span class="built_in">Scalar</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>), <span class="number">2</span>);</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;src&quot;</span>, src);</span><br><span class="line">	cv::<span class="built_in">imshow</span>(<span class="string">&quot;dst&quot;</span>, dst);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>==可以学习Harris和shi-tomasi角点检测方法==</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/lwzkiller/article/details/54633670">Harris角点检测原理详解_lwzkiller的专栏-CSDN博客_harris角点检测</a></p>
<h2 id="图像形态学处理"><a href="#图像形态学处理" class="headerlink" title="图像形态学处理"></a>图像形态学处理</h2><p>形态学，即数学形态学(mathematical Morphology），是图像处理中应用最为广泛的技术之一，主要用于从图像中提取对表达和描绘区域形状有意义的图像分量，使后续的识别工作能够抓住目标对象最为本质〈最具区分能力－most discriminative）的形状特征，如边界和连通区域等。同时像细化、像素化和修剪毛刺等技术也常应用于图像的预处理和后处理中，成为图像增强技术的有力补充。</p>
<ul>
<li><strong>二值图像</strong>的基本形态学运算， 包括腐蚀、膨胀、开和闭。</li>
<li>二值形态学的经典应用， 包括击中击不中变换、边界提取和跟踪、区域填充、提取连通分量、细化和像素化， 以及凸壳</li>
<li>灰度图像的形态学运算， 包括灰度腐蚀、灰度膨胀、灰度开和灰度闭</li>
</ul>
<p>所有形态学运算都是针对图像中的前景物体进行的， 因而首先对图像前景和背景的认定给出必要的说明．</p>
<p>大多数图像，一般相对于背景而言物体的颜色（灰度）更深， 二值化之后物体会成为黑色， 而背景则成为白色， 因此我们通常是习惯于将物体用黑色（灰度值0）表示， 而背景用白色（灰度值255）表示。 如果有例外，可以先反色处理。</p>
<p>参考了：<a target="_blank" rel="noopener" href="https://blog.csdn.net/whuhan2013/article/details/53956606">形态学图像处理_Ricardo的博客-CSDN博客_形态学处理</a></p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/110787009">图像处理中常见的形态学方法 - 知乎 (zhihu.com)</a></p>
<h3 id="腐蚀与膨胀"><a href="#腐蚀与膨胀" class="headerlink" title="腐蚀与膨胀"></a>腐蚀与膨胀</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/alw_123/article/details/83868878">数字图像处理—-通俗理解腐蚀与膨胀_alw_123的博客-CSDN博客_图像腐蚀和膨胀的作用</a></p>
<p>形象来看：膨胀更白，腐蚀更黑</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Image_threshold</span><span class="params">(<span class="keyword">const</span> Mat inputMat, Mat &amp;outsingleMat)</span> </span>&#123;</span><br><span class="line">	Mat dst;</span><br><span class="line">	<span class="built_in">cvtColor</span>(inputMat, dst, COLOR_RGB2GRAY);</span><br><span class="line">	<span class="built_in">imshow</span>(<span class="string">&quot;cvtcolor&quot;</span>,dst);</span><br><span class="line">	<span class="built_in">threshold</span>(dst, outsingleMat,<span class="number">80</span>,<span class="number">255</span>, cv::THRESH_BINARY);</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//传入的必须是单通道矩阵</span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Dilate</span><span class="params">(Mat &amp;singleMat,Mat &amp;outputArray)</span> </span>&#123;	</span><br><span class="line">	<span class="comment">//dilate(src, dst, cv::Mat());</span></span><br><span class="line">	<span class="comment">//第三个参数代表膨胀或腐蚀的核，上面这个就是默认情况：3*3方形核</span></span><br><span class="line">	<span class="built_in">dilate</span>(singleMat, outputArray, <span class="built_in">getStructuringElement</span>(MORPH_RECT, <span class="built_in">Size</span>(<span class="number">3</span>,<span class="number">3</span>)));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">Erode</span><span class="params">(Mat &amp;singleMat, Mat &amp;outputArray)</span> </span>&#123;</span><br><span class="line">	<span class="built_in">erode</span>(singleMat, outputArray, <span class="built_in">getStructuringElement</span>(MORPH_RECT, <span class="built_in">Size</span>(<span class="number">3</span>, <span class="number">3</span>)));</span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	Mat mmat, inputMat, outsingleMat;</span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span> * filename = <span class="string">&quot;D:\\myTemp\\cv\\image\\DSCF1062.jpg&quot;</span>;</span><br><span class="line">    <span class="comment">//首先读取彩色图片</span></span><br><span class="line">	mmat = <span class="built_in">imread</span>(filename,IMREAD_COLOR);</span><br><span class="line">    <span class="comment">//彩色图片首先变为灰度图，再变为二值图</span></span><br><span class="line">	<span class="built_in">Image_threshold</span>(mmat, outsingleMat);</span><br><span class="line">	<span class="comment">//先腐蚀变黑</span></span><br><span class="line">	<span class="built_in">Erode</span>(outsingleMat, outsingleMat);</span><br><span class="line">	<span class="built_in">imwrite</span>(<span class="string">&quot;erode.jpg&quot;</span>, outsingleMat);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//再膨胀</span></span><br><span class="line">    <span class="built_in">Dilate</span>(outsingleMat, outsingleMat);</span><br><span class="line">	<span class="built_in">imwrite</span>(<span class="string">&quot;dilate.jpg&quot;</span>, outsingleMat);</span><br><span class="line"></span><br><span class="line">	<span class="comment">//利用蒙版扣原图</span></span><br><span class="line">    <span class="function">Mat <span class="title">dst</span><span class="params">(mmat.rows, mmat.cols,CV_8UC3)</span></span>;</span><br><span class="line">	mmat.<span class="built_in">copyTo</span>(dst, outsingleMat);</span><br><span class="line">	<span class="built_in">imwrite</span>(<span class="string">&quot;erode_dilateS.jpg&quot;</span>, dst);</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">waitKey</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="视频处理"><a href="#视频处理" class="headerlink" title="视频处理"></a>视频处理</h2><h3 id="摄像头数据获取"><a href="#摄像头数据获取" class="headerlink" title="摄像头数据获取"></a>摄像头数据获取</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">DispBasic</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">cv::VideoCapture <span class="title">capture</span><span class="params">(<span class="number">0</span>)</span></span>;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">int</span> width = <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(capture.<span class="built_in">get</span>(CAP_PROP_FRAME_WIDTH));<span class="comment">//视频流中帧宽度</span></span><br><span class="line">	<span class="keyword">int</span> height = <span class="keyword">static_cast</span>&lt;<span class="keyword">int</span>&gt;(capture.<span class="built_in">get</span>(CAP_PROP_FRAME_WIDTH));<span class="comment">//其他视频流有关的enum可查看源码</span></span><br><span class="line">	std::cout &lt;&lt; <span class="string">&quot;frame size = &quot;</span> &lt;&lt; width &lt;&lt; <span class="string">&quot; * &quot;</span> &lt;&lt; height &lt;&lt; std::endl;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">const</span> <span class="keyword">char</span>* wName = <span class="string">&quot;camera&quot;</span>;</span><br><span class="line">	cv::Mat src;</span><br><span class="line">	cv::<span class="built_in">namedWindow</span>(wName, WINDOW_AUTOSIZE);</span><br><span class="line">	<span class="keyword">while</span> (<span class="literal">true</span>) &#123;</span><br><span class="line">		capture &gt;&gt; src;</span><br><span class="line">		cv::<span class="built_in">imshow</span>(wName, src);</span><br><span class="line">		<span class="keyword">if</span> (cv::<span class="built_in">waitKey</span>(<span class="number">1</span>) &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="窗口与鼠标"><a href="#窗口与鼠标" class="headerlink" title="窗口与鼠标"></a>窗口与鼠标</h2><p><strong>namedWindow</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">namedWindow</span>(<span class="string">&quot;myWindow&quot;</span>, WINDOW_NORMAL);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>参数2：窗口的标识，一般默认为WINDOW_AUTOSIZE 。</p>
<p>WINDOW_AUTOSIZE 窗口大小自动适应图片大小，并且不可手动更改。（上面图1就是使用的它）</p>
<p>WINDOW_NORMAL 用户可以改变这个窗口大小（上面图2就是使用的它）</p>
<p>WINDOW_OPENGL 窗口创建的时候会支持OpenGL</p>
</blockquote>
<p><strong>resizeWindow</strong></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mmat = <span class="built_in">imread</span>(filename, IMREAD_COLOR);</span><br><span class="line"><span class="built_in">namedWindow</span>(<span class="string">&quot;myWindow&quot;</span>, WINDOW_NORMAL);</span><br><span class="line"><span class="built_in">resizeWindow</span>(<span class="string">&quot;myWindow&quot;</span>, <span class="built_in">Size</span>(mmat.cols,mmat.rows));</span><br><span class="line"><span class="built_in">imshow</span>(<span class="string">&quot;myWindow&quot;</span>, mmat);</span><br></pre></td></tr></table></figure>
<h3 id="鼠标操作"><a href="#鼠标操作" class="headerlink" title="鼠标操作"></a>鼠标操作</h3><p>首先我们可以通过以下例子，掌握鼠标回调函数中 <code>event</code>  和   <code>flags</code>不同取值的作用，以及<code>setMouseCallback</code>用法</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">bool</span> down = <span class="literal">false</span>;</span><br><span class="line"><span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">onMouse</span><span class="params">(<span class="keyword">int</span> event, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> flags, <span class="keyword">void</span>* param)</span> <span class="comment">//鼠标回调函数</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="comment">/*  鼠标事件发生时，自动执行</span></span><br><span class="line"><span class="comment">    Event是整数，表示鼠标事件的类型</span></span><br><span class="line"><span class="comment">    X和Y为事件发生时鼠标的坐标，用像素坐标表示</span></span><br><span class="line"><span class="comment">    flags表示事件发生时按下鼠标的那个键</span></span><br><span class="line"><span class="comment">    param是指向任意对象的指针，作为附件的参数发送给函数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">    cv::Mat* im = <span class="keyword">reinterpret_cast</span>&lt;cv::Mat*&gt;(param);</span><br><span class="line">    <span class="comment">//im事件发生时鼠标所指的图像指针</span></span><br><span class="line">    <span class="keyword">if</span> (event== cv::EVENT_LBUTTONDOWN) &#123;   <span class="comment">//如果按下了鼠标左键</span></span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;你按下了鼠标左键x=&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;,     y=&quot;</span> &lt;&lt; y &lt;&lt; std::endl &lt;&lt; std::endl;</span><br><span class="line">        down = <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (event == cv::EVENT_LBUTTONUP) &#123;  <span class="comment">//如果释放了鼠标左键</span></span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;你释放了鼠标左键x=&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;,     y=&quot;</span> &lt;&lt; y &lt;&lt; std::endl &lt;&lt; std::endl;</span><br><span class="line">        down = <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (event == cv::EVENT_MOUSEMOVE &amp;&amp; down==<span class="literal">true</span>) &#123;   <span class="comment">//如果按下左键并移动</span></span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;你按下了鼠标左键并移动 x=&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;,     y=&quot;</span> &lt;&lt; y &lt;&lt; std::endl &lt;&lt; std::endl;</span><br><span class="line">    &#125;     </span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        cv::EVENT_LBUTTONDOWN=1        左键按下</span></span><br><span class="line"><span class="comment">        cv::EVENT_RBUTTONDOWN=2        右键按下</span></span><br><span class="line"><span class="comment">        cv::EVENT_MBUTTONDOWN=3        中键按下</span></span><br><span class="line"><span class="comment">        cv::EVENT_LBUTTONUP=4          左键放开</span></span><br><span class="line"><span class="comment">        cv::EVENT_RBUTTONUP=5          右键放开</span></span><br><span class="line"><span class="comment">        cv::EVENT_MBUTTONUP=6          中键放开</span></span><br><span class="line"><span class="comment">        cv::EVENT_LBUTTONDBLCLK=7      左键双击</span></span><br><span class="line"><span class="comment">        cv::EVENT_RBUTTONDBLCLK=8      右键双击</span></span><br><span class="line"><span class="comment">        cv::EVENT_MBUTTONDBLCLK=9      中键双击</span></span><br><span class="line"><span class="comment">        cv::EVENT_MOUSEMOVE=0,         鼠标移动</span></span><br><span class="line"><span class="comment">        cv::EVENT_MOUSEWHEEL=10,       滚轮滚动</span></span><br><span class="line"><span class="comment">        cv::EVENT_MOUSEHWHEEL=11       横向滚轮滚动</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (flags == cv::EVENT_FLAG_LBUTTON) &#123;    <span class="comment">//左键拖拽</span></span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;你拖拽了鼠标左键 x=&quot;</span> &lt;&lt; x &lt;&lt; <span class="string">&quot;,     y=&quot;</span> &lt;&lt; y &lt;&lt; std::endl &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (flags == <span class="number">8</span>) &#123;    </span><br><span class="line">        std::cerr &lt;&lt; <span class="string">&quot;按住CTRL拖拽 i=&quot;</span> &lt;&lt; i++ &lt;&lt; std::endl &lt;&lt; std::endl;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    cv::EVENT_FLAG_LBUTTON   =1,   //左键拖拽</span></span><br><span class="line"><span class="comment">    cv::EVENT_FLAG_RBUTTON   =2,   //右键拖拽</span></span><br><span class="line"><span class="comment">    cv::EVENT_FLAG_MBUTTON   =4,   //中键拖拽</span></span><br><span class="line"><span class="comment">    cv::EVENT_FLAG_CTRLKEY   =8   //按住CTRL</span></span><br><span class="line"><span class="comment">    cv::EVENT_FLAG_SHIFTKEY  =16  //按住Shift</span></span><br><span class="line"><span class="comment">    cv::EVENT_FLAG_ALTKEY    =32   //按住ALT</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span>** argv)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    cv::Mat image = cv::<span class="built_in">imread</span>(<span class="string">&quot;D:/bb/tu/1.jpg&quot;</span>);</span><br><span class="line">    <span class="keyword">if</span> (image.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">        std::cout &lt;&lt; <span class="string">&quot;图像读取失败...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">namedWindow</span>(<span class="string">&quot;Original Image&quot;</span>);</span><br><span class="line">    cv::<span class="built_in">imshow</span>(<span class="string">&quot;Original Image&quot;</span>, image);</span><br><span class="line"></span><br><span class="line">    cv::<span class="built_in">setMouseCallback</span>(<span class="string">&quot;Original Image&quot;</span>, onMouse, <span class="keyword">reinterpret_cast</span>&lt;<span class="keyword">void</span>*&gt;(&amp;image));<span class="comment">//处理鼠标动作</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    参数1:窗口的名字</span></span><br><span class="line"><span class="comment">    参数2:onMouse:鼠标响应函数，回调函数。指定窗口里每次鼠标时间发生的时候，被调用的函数指针</span></span><br><span class="line"><span class="comment">    参数3:userdate：传给回调函数的参数【鼠标所指的图像】</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    cv::<span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="示例：交互绘制ROI"><a href="#示例：交互绘制ROI" class="headerlink" title="示例：交互绘制ROI"></a>示例：交互绘制ROI</h3><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">bool</span> leftButtonPushed = <span class="literal">false</span>;</span><br><span class="line">cv::Point startPoint,endPoint;</span><br><span class="line">Mat image,image_copy,imagePartial,imageROI;</span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">createROI</span><span class="params">(<span class="keyword">int</span> event, <span class="keyword">int</span> x, <span class="keyword">int</span> y, <span class="keyword">int</span> flag, <span class="keyword">void</span> * param)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">if</span> (event == cv::EVENT_LBUTTONDOWN &amp;&amp; leftButtonPushed == <span class="literal">false</span>) &#123;</span><br><span class="line">		leftButtonPushed = <span class="literal">true</span>;</span><br><span class="line">		startPoint.x = x;</span><br><span class="line">		startPoint.y = y;		</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (leftButtonPushed) &#123;</span><br><span class="line">		<span class="keyword">if</span> (flag == EVENT_FLAG_LBUTTON) &#123;</span><br><span class="line">			<span class="built_in">rectangle</span>(image, <span class="built_in">Rect</span>(startPoint, <span class="built_in">Point</span>(x, y)), <span class="built_in">Scalar</span>(<span class="number">0</span>, <span class="number">255</span>, <span class="number">255</span>,<span class="number">80</span>),<span class="number">-1</span>);			</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">if</span> (event == cv::EVENT_LBUTTONUP) &#123;</span><br><span class="line">        endPoint = <span class="built_in">Point</span>(x, y);</span><br><span class="line">		leftButtonPushed = <span class="literal">false</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">imshow</span>(<span class="string">&quot;win&quot;</span>, image);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	image = cv::<span class="built_in">imread</span>(<span class="string">&quot;D:\\myTemp\\cv\\image\\lena.jpg&quot;</span>);</span><br><span class="line">	image_copy = image.<span class="built_in">clone</span>();</span><br><span class="line">	<span class="keyword">if</span> (image.<span class="built_in">empty</span>()) &#123;</span><br><span class="line">		std::cout &lt;&lt; <span class="string">&quot;图像读取失败...&quot;</span> &lt;&lt; std::endl;</span><br><span class="line">		<span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">	<span class="built_in">namedWindow</span>(<span class="string">&quot;win&quot;</span>);</span><br><span class="line">	<span class="built_in">imshow</span>(<span class="string">&quot;win&quot;</span>, image);</span><br><span class="line">	<span class="built_in">setMouseCallback</span>(<span class="string">&quot;win&quot;</span>, createROI, <span class="number">0</span>);</span><br><span class="line">	<span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">		<span class="built_in">imshow</span>(<span class="string">&quot;win&quot;</span>, image);</span><br><span class="line">		<span class="keyword">int</span> c = <span class="built_in">waitKey</span>(<span class="number">0</span>);</span><br><span class="line">		<span class="keyword">if</span> ((<span class="keyword">char</span>)c == <span class="string">&#x27;q&#x27;</span>)</span><br><span class="line">		&#123;</span><br><span class="line">			<span class="built_in">destroyAllWindows</span>();</span><br><span class="line">			<span class="keyword">break</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	imageROI.<span class="built_in">create</span>(image.rows, image.cols, CV_8UC1);</span><br><span class="line">	imageROI.<span class="built_in">setTo</span>(<span class="number">0</span>);</span><br><span class="line">	<span class="keyword">for</span> (<span class="keyword">int</span> i = startPoint.y; i &lt; endPoint.y; i++) &#123;   <span class="comment">//由于坐标系是按照</span></span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">int</span> j = startPoint.x; j &lt; endPoint.x; j++) &#123;</span><br><span class="line">			imageROI.at&lt;uchar&gt;(i,j) = <span class="number">255</span>;</span><br><span class="line"></span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">imshow</span>(<span class="string">&quot;roi&quot;</span>, imageROI);</span><br><span class="line">	Mat out;</span><br><span class="line">	image_copy.<span class="built_in">copyTo</span>(out, imageROI);</span><br><span class="line">	<span class="built_in">imshow</span>(<span class="string">&quot;new&quot;</span>, out);</span><br><span class="line">	<span class="built_in">waitKey</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="与其他库数据交互"><a href="#与其他库数据交互" class="headerlink" title="与其他库数据交互"></a>与其他库数据交互</h2><h3 id="Eigen"><a href="#Eigen" class="headerlink" title="Eigen"></a>Eigen</h3><p>头文件必须把Eigen写在前面</p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;Eigen/Dense&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/core/eigen.hpp&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;opencv2/opencv.hpp&gt;</span></span></span><br><span class="line"> </span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> cv;</span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> Eigen;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">eigen_opencv</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	<span class="function">Eigen::MatrixXd <span class="title">m</span><span class="params">(<span class="number">2</span>, <span class="number">5</span>)</span>,d</span>;</span><br><span class="line">	m &lt;&lt; <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, <span class="number">10</span>;</span><br><span class="line">	Mat mat;</span><br><span class="line">	<span class="built_in">eigen2cv</span>(m, mat);</span><br><span class="line">	mat = mat + <span class="number">5</span>;</span><br><span class="line">	<span class="built_in">cv2eigen</span>(mat, d);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Shuming Si</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://si-xiaoming.github.io/2021/02/12/openCV-cpp/">http://si-xiaoming.github.io/2021/02/12/openCV-cpp/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://si-xiaoming.github.io" target="_blank">枕小路的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/c/">c++</a><a class="post-meta__tags" href="/tags/opencv/">opencv</a></div><div class="post_share"><div class="social-share" data-image="https://w.wallhaven.cc/full/ne/wallhaven-nemp9k.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/wechat.jpg" target="_blank"><img class="post-qr-code-img" src="/img/wechat.jpg" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2021/11/12/eigen%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/"><img class="prev-cover" src="https://w.wallhaven.cc/full/0p/wallhaven-0pgedp.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">eigen基础</div></div></a></div><div class="next-post pull-right"><a href="/2021/01/12/matplotlib%E4%BB%8E%E7%BB%98%E5%9B%BE%E5%88%B0%E6%8E%92%E7%89%88/"><img class="next-cover" src="https://w.wallhaven.cc/full/q6/wallhaven-q6xpdq.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">matplotlib从绘图到排版</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/11/12/eigen%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/" title="eigen基础"><img class="cover" src="https://w.wallhaven.cc/full/0p/wallhaven-0pgedp.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-11-12</div><div class="title">eigen基础</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/ssm.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Shuming Si</div><div class="author-info__description"></div></div><div class="card-info-data is-center"><div class="card-info-data-item"><a href="/archives/"><div class="headline">文章</div><div class="length-num">7</div></a></div><div class="card-info-data-item"><a href="/tags/"><div class="headline">标签</div><div class="length-num">10</div></a></div><div class="card-info-data-item"><a href="/categories/"><div class="headline">分类</div><div class="length-num">1</div></a></div></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Si-Xiaoming"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/Si-Xiaoming" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="/zbssm123@163.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">欢迎各位大佬！</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#include"><span class="toc-number">1.</span> <span class="toc-text">include</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mat%E7%9F%A9%E9%98%B5"><span class="toc-number">2.</span> <span class="toc-text">mat矩阵</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%9B%E5%BB%BAmat%E7%9F%A9%E9%98%B5"><span class="toc-number">2.1.</span> <span class="toc-text">创建mat矩阵</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A9%E9%98%B5mat%E8%B5%8B%E5%80%BC"><span class="toc-number">2.2.</span> <span class="toc-text">矩阵mat赋值</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D"><span class="toc-number">2.3.</span> <span class="toc-text">拷贝</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%A8%E6%AD%A4%E8%BE%A8%E6%9E%90setTo%E4%B8%8EcopyTo"><span class="toc-number">2.3.1.</span> <span class="toc-text">在此辨析setTo与copyTo</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mat%E5%B1%9E%E6%80%A7"><span class="toc-number">2.4.</span> <span class="toc-text">Mat属性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E5%9F%BA%E6%9C%AC%E8%AE%A1%E7%AE%97"><span class="toc-number">3.</span> <span class="toc-text">图像基本计算</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%88%A9%E7%94%A8%E5%87%BD%E6%95%B0%E8%BF%9B%E8%A1%8C%E5%8A%A0%E5%87%8F%E4%B9%98%E9%99%A4%E7%AD%89"><span class="toc-number">3.1.</span> <span class="toc-text">利用函数进行加减乘除等</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%87%8D%E8%BD%BD%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-number">3.2.</span> <span class="toc-text">重载运算符</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9C%A8%E5%9B%BE%E5%83%8F%E4%B8%8A%E7%BB%98%E5%88%B6"><span class="toc-number">4.</span> <span class="toc-text">在图像上绘制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%80%E5%8D%95%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86"><span class="toc-number">5.</span> <span class="toc-text">简单图像处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%9F%A9%E9%98%B5%E9%81%8D%E5%8E%86"><span class="toc-number">5.1.</span> <span class="toc-text">矩阵遍历</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BF%AB%E9%80%9F%E7%BF%BB%E8%BD%AC"><span class="toc-number">5.2.</span> <span class="toc-text">快速翻转</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resize"><span class="toc-number">5.3.</span> <span class="toc-text">resize</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%BF%E5%B0%84%E5%8F%98%E6%8D%A2"><span class="toc-number">5.4.</span> <span class="toc-text">仿射变换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%86%E8%A7%92%E8%AE%BE%E7%BD%AE"><span class="toc-number">5.5.</span> <span class="toc-text">视角设置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A2%9C%E8%89%B2%E9%80%9A%E9%81%93%E5%8F%98%E5%8C%96"><span class="toc-number">5.6.</span> <span class="toc-text">颜色通道变化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%87%E8%A1%A1%E5%8C%96"><span class="toc-number">5.7.</span> <span class="toc-text">均衡化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E4%BA%8C%E5%80%BC%E5%8C%96"><span class="toc-number">5.8.</span> <span class="toc-text">图像二值化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E6%BB%A4%E6%B3%A2"><span class="toc-number">6.</span> <span class="toc-text">图像滤波</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9D%87%E5%80%BC%E6%BB%A4%E6%B3%A2"><span class="toc-number">6.1.</span> <span class="toc-text">均值滤波</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%AB%98%E6%96%AF%E6%BB%A4%E6%B3%A2"><span class="toc-number">6.2.</span> <span class="toc-text">高斯滤波</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%B7%E7%A7%AF%E7%AE%97%E5%AD%90"><span class="toc-number">7.</span> <span class="toc-text">卷积算子</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E5%BE%81%E6%8F%90%E5%8F%96"><span class="toc-number">8.</span> <span class="toc-text">特征提取</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%92%E7%82%B9%E6%A3%80%E6%B5%8B"><span class="toc-number">8.1.</span> <span class="toc-text">角点检测</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9B%BE%E5%83%8F%E5%BD%A2%E6%80%81%E5%AD%A6%E5%A4%84%E7%90%86"><span class="toc-number">9.</span> <span class="toc-text">图像形态学处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%85%90%E8%9A%80%E4%B8%8E%E8%86%A8%E8%83%80"><span class="toc-number">9.1.</span> <span class="toc-text">腐蚀与膨胀</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%86%E9%A2%91%E5%A4%84%E7%90%86"><span class="toc-number">10.</span> <span class="toc-text">视频处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%91%84%E5%83%8F%E5%A4%B4%E6%95%B0%E6%8D%AE%E8%8E%B7%E5%8F%96"><span class="toc-number">10.1.</span> <span class="toc-text">摄像头数据获取</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AA%97%E5%8F%A3%E4%B8%8E%E9%BC%A0%E6%A0%87"><span class="toc-number">11.</span> <span class="toc-text">窗口与鼠标</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BC%A0%E6%A0%87%E6%93%8D%E4%BD%9C"><span class="toc-number">11.1.</span> <span class="toc-text">鼠标操作</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%A4%BA%E4%BE%8B%EF%BC%9A%E4%BA%A4%E4%BA%92%E7%BB%98%E5%88%B6ROI"><span class="toc-number">11.2.</span> <span class="toc-text">示例：交互绘制ROI</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8E%E5%85%B6%E4%BB%96%E5%BA%93%E6%95%B0%E6%8D%AE%E4%BA%A4%E4%BA%92"><span class="toc-number">12.</span> <span class="toc-text">与其他库数据交互</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Eigen"><span class="toc-number">12.1.</span> <span class="toc-text">Eigen</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/02/12/%E6%B5%85%E8%B0%88%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8python%E8%BF%9B%E8%A1%8C%E7%88%AC%E8%99%AB%E6%93%8D%E4%BD%9C/" title="浅谈如何使用python进行爬虫操作"><img src="https://gitee.com/sixiaoming12138/my-web-site-pic/raw/master/1d57dd1b9b3ed35bce25a28f69f11421.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="浅谈如何使用python进行爬虫操作"/></a><div class="content"><a class="title" href="/2022/02/12/%E6%B5%85%E8%B0%88%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8python%E8%BF%9B%E8%A1%8C%E7%88%AC%E8%99%AB%E6%93%8D%E4%BD%9C/" title="浅谈如何使用python进行爬虫操作">浅谈如何使用python进行爬虫操作</a><time datetime="2022-02-11T17:09:02.000Z" title="发表于 2022-02-12 01:09:02">2022-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/11/12/eigen%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/" title="eigen基础"><img src="https://w.wallhaven.cc/full/0p/wallhaven-0pgedp.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="eigen基础"/></a><div class="content"><a class="title" href="/2021/11/12/eigen%E5%9F%BA%E7%A1%80%E6%93%8D%E4%BD%9C/" title="eigen基础">eigen基础</a><time datetime="2021-11-12T08:12:00.000Z" title="发表于 2021-11-12 16:12:00">2021-11-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/02/12/openCV-cpp/" title="opencv c++版本基础"><img src="https://w.wallhaven.cc/full/ne/wallhaven-nemp9k.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="opencv c++版本基础"/></a><div class="content"><a class="title" href="/2021/02/12/openCV-cpp/" title="opencv c++版本基础">opencv c++版本基础</a><time datetime="2021-02-12T03:12:00.000Z" title="发表于 2021-02-12 11:12:00">2021-02-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2021/01/12/matplotlib%E4%BB%8E%E7%BB%98%E5%9B%BE%E5%88%B0%E6%8E%92%E7%89%88/" title="matplotlib从绘图到排版"><img src="https://w.wallhaven.cc/full/q6/wallhaven-q6xpdq.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="matplotlib从绘图到排版"/></a><div class="content"><a class="title" href="/2021/01/12/matplotlib%E4%BB%8E%E7%BB%98%E5%9B%BE%E5%88%B0%E6%8E%92%E7%89%88/" title="matplotlib从绘图到排版">matplotlib从绘图到排版</a><time datetime="2021-01-11T17:12:00.000Z" title="发表于 2021-01-12 01:12:00">2021-01-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/07/11/%E5%9F%BA%E4%BA%8Epython%E4%B8%8EMySQL%E7%9A%84%E8%AE%B0%E8%B4%A6%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="基于python与MySQL的记账可视化小程序"><img src="https://w.wallhaven.cc/full/eo/wallhaven-eo53xo.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于python与MySQL的记账可视化小程序"/></a><div class="content"><a class="title" href="/2020/07/11/%E5%9F%BA%E4%BA%8Epython%E4%B8%8EMySQL%E7%9A%84%E8%AE%B0%E8%B4%A6%E5%8F%AF%E8%A7%86%E5%8C%96%E5%B0%8F%E7%A8%8B%E5%BA%8F/" title="基于python与MySQL的记账可视化小程序">基于python与MySQL的记账可视化小程序</a><time datetime="2020-07-11T15:53:42.000Z" title="发表于 2020-07-11 23:53:42">2020-07-11</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url('https://gitee.com/code2thing2021/picgo/raw/master/202112121038191.jpg')"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2022 By Shuming Si</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">本地搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>if (!window.MathJax) {
  window.MathJax = {
    tex: {
      inlineMath: [ ['$','$'], ["\\(","\\)"]],
      tags: 'ams'
    },
    chtml: {
      scale: 1.2
    },
    options: {
      renderActions: {
        findScript: [10, doc => {
          for (const node of document.querySelectorAll('script[type^="math/tex"]')) {
            const display = !!node.type.match(/; *mode=display/)
            const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display)
            const text = document.createTextNode('')
            node.parentNode.replaceChild(text, node)
            math.start = {node: text, delim: '', n: 0}
            math.end = {node: text, delim: '', n: 0}
            doc.math.push(math)
          }
        }, ''],
        insertScript: [200, () => {
          document.querySelectorAll('mjx-container:not\([display]\)').forEach(node => {
            const target = node.parentNode
            if (target.nodeName.toLowerCase() === 'li') {
              target.parentNode.classList.add('has-jax')
            } else {
              target.classList.add('has-jax')
            }
          });
        }, '', false]
      }
    }
  }
  
  const script = document.createElement('script')
  script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js'
  script.id = 'MathJax-script'
  script.async = true
  document.head.appendChild(script)
} else {
  MathJax.startup.document.state(0)
  MathJax.texReset()
  MathJax.typeset()
}</script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/contrib/copy-tex.css"><script>(() => {
  document.querySelectorAll('#article-container span.katex-display').forEach(item => {
    btf.wrap(item, 'div', { class: 'katex-wrap'})
  })
})()</script></div><script id="canvas_nest" defer="defer" color="0,0,255" opacity="0.7" zIndex="-1" count="99" mobile="false" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-nest.min.js"></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/gh/metowolf/MetingJS@1.2/dist/Meting.min.js"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>